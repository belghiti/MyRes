[{"D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\index.js":"1","D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\App.js":"2","D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\reportWebVitals.js":"3","D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\store\\reducers\\appReducer.js":"4","D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\components\\Login.js":"5","D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\store\\reducers\\authReducer.js":"6"},{"size":713,"mtime":1614541563000,"results":"7","hashOfConfig":"8"},{"size":7972,"mtime":1619091765961,"results":"9","hashOfConfig":"8"},{"size":362,"mtime":1614541563000,"results":"10","hashOfConfig":"8"},{"size":170,"mtime":1614541563000,"results":"11","hashOfConfig":"8"},{"size":4778,"mtime":1615846232483,"results":"12","hashOfConfig":"8"},{"size":491,"mtime":1614541563000,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"cdzb0l",{"filePath":"17","messages":"18","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19","usedDeprecatedRules":"16"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26","usedDeprecatedRules":"16"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},"D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\index.js",[],["30","31"],"D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\App.js",["32","33","34","35","36","37"],"import   React ,  { Component }from 'react';\nimport moment from 'moment';\nimport './App.css';\nimport Login from \"./components/Login\"\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\n\nclass App extends Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n        all_Product : [],\n        product_cat : [],\n        cart : [],\n        Total : 0,\n        user : '',\n        order_id:\"\"\n    }\n    const dt = moment().format(\"DD/MM/YYYY HH:mm:ss\")\n    console.log(\"date now : \",dt)\n   console.log(this.props.user)\n}\n\n  get_Category_Product = () => {\n    return axios.get('http://localhost:3001/api/productCategory').then( data => {\n\n        this.setState({\n            all_Product : data.data\n        })\n    }) \n  }\n\n  get_Product = (category) => {\n    if(this.props.user !== null) {\n    return axios.get(`http://localhost:3001/api/product/${this.props.user.worksAt[0].id}/${category}`).then(data => {\n        \n      this.setState({\n        product_cat : data.data\n      })\n    })\n\n  }\n  }\n\n  add_Cart = (product_id,name_product,price,quantity=1) => {\n    let allReadyExist = false\n    if(this.state.cart.length === 0){\n      this.setState({\n        cart : [\n          {\n          product_id: product_id,\n          name : name_product,\n          price : price,\n          quantity : quantity\n          }],\n          Total:price\n      })\n    }\n    else {\n      const newCart = this.state.cart.map((item)=>{\n\n        if(item.name === name_product){\n         \n          item.quantity++\n          allReadyExist = true\n          return item\n        } else {\n          return item\n        }\n      \n          \n        \n      })\n     \n      if(allReadyExist == false){\n        this.setState({\n          cart: [\n            ...this.state.cart,\n            {\n              product_id:product_id,\n              name :name_product,\n              price : price,\n             quantity : quantity\n            }\n          ]\n        })\n   \n      }\n      else {\n        this.setState({\n          cart : newCart\n        })\n      }\n    }\n \n  }\n\n  total = () => {\n    const total = this.state.cart.reduce((sum,total)=>sum = sum + total.quantity * total.price,0)\n    this.setState({\n      Total : total\n    })\n  }\n\n  minus = (name) => {\n    let toDeleteFromCart\n\n    let minusProduct = this.state.cart.map((item)=>{\n      if(item.name===name){\n        if(item.quantity===1) {\n          toDeleteFromCart = item\n        } else {\n            item.quantity--\n            return item\n        }\n      } else {\n        return item\n      }\n    })\n\n    if(toDeleteFromCart){\n      minusProduct = this.state.cart.filter(product=> product.name !== toDeleteFromCart.name)\n    }\n\n    this.setState({\n      cart : minusProduct\n    })\n    \n  }\n\n  deleteFromCart = (name) => {\n    let toDeleteFromCart\n\n    let deleteProduct = this.state.cart.map((item)=>{\n      if(item.name===name){\n       \n          toDeleteFromCart = item\n          return item\n      } else {\n        return item\n      }\n    })\n\n    if(toDeleteFromCart){\n      deleteProduct = this.state.cart.filter(product=> product.name !== toDeleteFromCart.name)\n    }\n\n    this.setState({\n      cart : deleteProduct\n    })\n  }\n\n  // Add new order\n  \n  add_New_Order = () => {\n    axios.post(\"http://localhost:3001/api/order/add\",{ \n      user_id : this.props.user._id,\n      date : moment().format(\"DD-MM-YYYY\"),\n      total : this.state.Total,\n      products : this.state.cart\n    }).then((data) => {\n      console.log(\"Data Order is send : \", data)\n     \n      this.setState({\n        cart : [],\n        Total : 0\n      })\n\n    })\n  }\n\n\n  componentDidMount = ()  => {\n    if(this.props.user) {\n      this.setState({\n        user : this.props.user._id\n      })\n    }\n    this.get_Category_Product()\n  }\n componentDidUpdate = (prevProps,prevState) => {\n\n    if(prevState.cart !== this.state.cart) {\n\n       this.total()\n    }\n\n  }\n  render() {\n    const {token, user} = this.props \n   \n   \n    //console.log(user.worksAt[0].id)\n    const nameCatProducte = (this.state.all_Product !== undefined ) ? this.state.all_Product.map((item,index)=>{\n      return <a href=\"#\"  className=\"list-group-item list-group-item-action \" key={index} onClick= {()=>this.get_Product(item._id)}> {item.name}</a> \n     \n  }) : <div></div>\n\n  const product_category = (this.state.product_cat !== undefined) ? this.state.product_cat.map((item,index)=>{\n    console.log(item._id,\" : \",item.name,\" : \",item.productImage)\n    //{item.productImage}\n    return  <div key={index} className=\"col-md-4\">\n                <div className=\"card\">\n                    <div className=\"img-container\">\n                        <div className=\"d-flex justify-content-between align-items-center p-2 first\"> \n                          \n                          <img src={(item.productImage !== undefined) ? 'http://localhost:3001/'+ item.productImage : \"https://www.anonymapparel.com/wp-content/plugins/woocommerce/assets/images/placeholder.png\"} className=\"img-fluid\"></img>\n                        </div> \n                    \n                    </div>\n                    <div className=\"product-detail-container\">\n                        <div className=\"d-flex justify-content-between align-items-center\">\n                            <h6 className=\"mb-0\">{item.name}</h6> \n                            <span className=\"text-danger font-weight-bold\">{item.price} - MAD</span>\n                        </div>\n                        <div className=\"d-flex justify-content-between align-items-center mt-2\">\n                            \n                        </div>\n                        <div className=\"mt-3\"> \n                          <button onClick={()=>this.add_Cart(item._id,item.name,item.price,item.quantity)} className=\"btn btn-primary btn-block\">Ajouter</button> \n                        </div>\n                    </div>\n                      \n                </div>\n              \n            </div>\n            \n\n  \n    \n}) : <div>Not yet</div>\n\nconst displayCart = (this.state.cart !== undefined  || this.state.cart.quantity !== undefined ) ? this.state.cart.map((item,index)=>{\n  return <div key={index}>\n    <li >\n    {item.quantity} * {item.name} = {item.quantity*item.price} MAD {\" \"}\n    <button className=\"btn btn-danger\" onClick={()=>this.deleteFromCart(item.name)}><i className=\"fa fa-trash\" aria-hidden=\"true\"></i></button>\n    {\"  \"}\n  <button className=\"btn btn-secondary\" onClick={()=>this.minus(item.name)}><i className=\"fa fa-minus\"></i>  </button>\n    \n  </li> \n  \n    </div>\n}) : <div>Not yet</div>\n\nconst total = this.state.cart.reduce((sum,total)=>sum = sum + total.quantity * total.price,0)\n\n  return (\n    <div>\n    {this.props.user !== null  ? (\n     <div className=\"row\">\n      <div className=\"col-sm-2 \">\n        <div className=\"position-fixed\">\n           <div className=\"bg-light border-right\" id=\"sidebar-wrapper\">\n           <div className=\"list-group list-group-flush\">\n             {nameCatProducte}\n       \n          \n            \n            \n              \n         \n            \n            </div>\n          </div>\n        </div>\n        \n      </div>\n      <div className=\"col-sm-7\">\n      <div className=\"container-fluid mt-3 mb-3\">\n        <div className=\"row g-2\">\n          {product_category}\n        </div>\n        </div>\n          \n        \n      </div>\n      <div className=\"col-sm-3\">\n        <div className=\"position-fixed\">\n            <ul>\n                {displayCart} \n                <li> <strong>Total : {total}</strong> </li>\n            </ul>\n            <div className=\"d-grid gap-2 col-6 mx-auto\">\n                <button type=\"button\" onClick={()=>this.add_New_Order()} className=\"btn btn-success\">Valider</button>\n            </div>\n        </div>\n      </div>\n      \n    </div>\n    \n    ) :  ( <Login/> ) \n  }\n  </div>\n  );\n\n}\n}\n\nconst mapStateToProps = (state) => {\n  return {\n      token: state.auth.token,\n      user: state.auth.user\n  }\n}\n\nexport default connect(mapStateToProps)(App);\n","D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\reportWebVitals.js",[],"D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\store\\reducers\\appReducer.js",[],"D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\components\\Login.js",["38","39","40","41","42","43","44","45","46","47","48","49"],"import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\nconst validEmailRegex = \n  RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n  const validateForm = (errors ) => {\n    let valid = true;\n    Object.values(errors).forEach(\n      // if we have an error string set valid to false\n      (val ) => val.length > 0 && (valid = false)\n    );\n    return valid;\n  }\nclass Login extends Component {\n    constructor(props){\n        super(props)\n        console.log(this.props)\n        console.log(\"Login \")\n\n        this.state={\n            email:\"\",\n            password:\"\",\n            formErrors: {\n        \n              email: \"\",\n              password: \"\"\n            }\n           \n          };\n       \n       }\n    \n    handleChange = (ev) =>{\n        this.setState({\n         [ev.target.name]: ev.target.value\n      \n        });\n        const { name, value } = ev.target;\n      let formErrors = this.state.formErrors;\n      switch (name) {\n    \n    case \"email\":\n      formErrors.email = validEmailRegex.test(value)\n        ? \"\"\n        : \"invalid email address\";\n      break;\n    case \"password\":\n      formErrors.password =\n        value.length < 6 ? \"minimum 6 characaters required\" : \"\";\n      break;\n    default:\n      break;\n  }\n  this.setState({formErrors, [name]: value} , ()=> {\n    console.log(formErrors)\n})\n    }\n\n    handleSubmit = (ev) => {\n        ev.preventDefault();\n      \n      console.log(this.state) \n      if(validateForm(this.state.formErrors)) {\n        axios.post('http://localhost:3001/api/user/login', {email : this.state.email,password : this.state.password})\n        .then( (response) => {\n          \n               console.log(response);\n                this.props.userLogin(response.data.token,response.data.user);\n                // Redirection\n               // this.props.history.push('/')\n               // if(re)\n        })\n        .catch( (error) => {\n          console.log(error);\n        \n        });\n      } else {\n        alert('email ou mot de passe invalid')\n      }\n    \n        \n        \n      }\n    render() {\n        return (\n            <div className=\"container login-container\">\n                <div className=\"row\">\n                    <div className=\"col-md-6 login-form-1\">\n                        <form onSubmit={this.handleSubmit}>\n                            <div className=\"mb-3\">\n                                <label for=\"exampleInputEmail1\" class=\"form-label\">Email address</label>\n                                <input \n                                    type=\"email\" \n                                    value={this.state.email} \n                                    name=\"email\"   \n                                    className=\"form-control\" \n                                    id=\"exampleInputEmail1\"\n                                    aria-describedby=\"emailHelp\" \n                                    onChange={this.handleChange}\n                                />\n                               \n                                {this.state.formErrors.email.length > 0 && (\n                                  <span className=\" text-danger h5 \">\n                                      {this.state.formErrors.email}\n                                  </span>\n                                )}\n                            </div>\n                            <div className=\"mb-3\">\n                                <label for=\"exampleInputPassword1\" className=\"form-label\">Password</label>\n                                <input \n                                    type=\"password\" \n                                    value={this.state.password} \n                                    name=\"password\"  \n                                    className=\"form-control\" \n                                    id=\"exampleInputPassword1\" \n                                    onChange={this.handleChange}\n                                />\n                                {this.state.formErrors.password.length > 0 && \n                                  <span className='text-danger h5 '>{this.state.formErrors.password}</span>}\n                            </div>\n                           \n                            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n      userLogin : (token,user) => {\n        dispatch({\n          type : 'LOGIN_USER',\n          token : token,\n          user : user\n          \n        })\n      }\n    }\n  }\n  \n\nexport default connect(null,mapDispatchToProps)(Login)\n","D:\\MyRes-master\\MyRes-master\\front\\desktop\\src\\store\\reducers\\authReducer.js",[],["50","51"],{"ruleId":"52","replacedBy":"53"},{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","severity":1,"message":"57","line":77,"column":24,"nodeType":"58","messageId":"59","endLine":77,"endColumn":26},{"ruleId":"60","severity":1,"message":"61","line":110,"column":50,"nodeType":"62","messageId":"63","endLine":110,"endColumn":52},{"ruleId":"64","severity":1,"message":"65","line":192,"column":12,"nodeType":"66","messageId":"67","endLine":192,"endColumn":17},{"ruleId":"64","severity":1,"message":"68","line":192,"column":19,"nodeType":"66","messageId":"67","endLine":192,"endColumn":23},{"ruleId":"69","severity":1,"message":"70","line":197,"column":14,"nodeType":"71","endLine":197,"endColumn":133},{"ruleId":"72","severity":1,"message":"73","line":209,"column":27,"nodeType":"71","endLine":209,"endColumn":235},{"ruleId":"74","severity":1,"message":"75","line":6,"column":20,"nodeType":"76","messageId":"77","endLine":6,"endColumn":21,"suggestions":"78"},{"ruleId":"74","severity":1,"message":"79","line":6,"column":24,"nodeType":"76","messageId":"77","endLine":6,"endColumn":25,"suggestions":"80"},{"ruleId":"74","severity":1,"message":"81","line":6,"column":32,"nodeType":"76","messageId":"77","endLine":6,"endColumn":33,"suggestions":"82"},{"ruleId":"74","severity":1,"message":"75","line":6,"column":45,"nodeType":"76","messageId":"77","endLine":6,"endColumn":46,"suggestions":"83"},{"ruleId":"74","severity":1,"message":"79","line":6,"column":49,"nodeType":"76","messageId":"77","endLine":6,"endColumn":50,"suggestions":"84"},{"ruleId":"74","severity":1,"message":"81","line":6,"column":57,"nodeType":"76","messageId":"77","endLine":6,"endColumn":58,"suggestions":"85"},{"ruleId":"74","severity":1,"message":"81","line":6,"column":66,"nodeType":"76","messageId":"77","endLine":6,"endColumn":67,"suggestions":"86"},{"ruleId":"74","severity":1,"message":"81","line":6,"column":70,"nodeType":"76","messageId":"77","endLine":6,"endColumn":71,"suggestions":"87"},{"ruleId":"74","severity":1,"message":"79","line":6,"column":86,"nodeType":"76","messageId":"77","endLine":6,"endColumn":87,"suggestions":"88"},{"ruleId":"74","severity":1,"message":"81","line":6,"column":94,"nodeType":"76","messageId":"77","endLine":6,"endColumn":95,"suggestions":"89"},{"ruleId":"74","severity":1,"message":"79","line":6,"column":111,"nodeType":"76","messageId":"77","endLine":6,"endColumn":112,"suggestions":"90"},{"ruleId":"74","severity":1,"message":"81","line":6,"column":119,"nodeType":"76","messageId":"77","endLine":6,"endColumn":120,"suggestions":"91"},{"ruleId":"52","replacedBy":"92"},{"ruleId":"54","replacedBy":"93"},"no-native-reassign",["94"],"no-negated-in-lhs",["95"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","array-callback-return","Array.prototype.map() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","no-unused-vars","'token' is assigned a value but never used.","Identifier","unusedVar","'user' is assigned a value but never used.","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","no-useless-escape","Unnecessary escape character: \\[.","Literal","unnecessaryEscape",["96","97"],"Unnecessary escape character: \\..",["98","99"],"Unnecessary escape character: \\\".",["100","101"],["102","103"],["104","105"],["106","107"],["108","109"],["110","111"],["112","113"],["114","115"],["116","117"],["118","119"],["94"],["95"],"no-global-assign","no-unsafe-negation",{"messageId":"120","fix":"121","desc":"122"},{"messageId":"123","fix":"124","desc":"125"},{"messageId":"120","fix":"126","desc":"122"},{"messageId":"123","fix":"127","desc":"125"},{"messageId":"120","fix":"128","desc":"122"},{"messageId":"123","fix":"129","desc":"125"},{"messageId":"120","fix":"130","desc":"122"},{"messageId":"123","fix":"131","desc":"125"},{"messageId":"120","fix":"132","desc":"122"},{"messageId":"123","fix":"133","desc":"125"},{"messageId":"120","fix":"134","desc":"122"},{"messageId":"123","fix":"135","desc":"125"},{"messageId":"120","fix":"136","desc":"122"},{"messageId":"123","fix":"137","desc":"125"},{"messageId":"120","fix":"138","desc":"122"},{"messageId":"123","fix":"139","desc":"125"},{"messageId":"120","fix":"140","desc":"122"},{"messageId":"123","fix":"141","desc":"125"},{"messageId":"120","fix":"142","desc":"122"},{"messageId":"123","fix":"143","desc":"125"},{"messageId":"120","fix":"144","desc":"122"},{"messageId":"123","fix":"145","desc":"125"},{"messageId":"120","fix":"146","desc":"122"},{"messageId":"123","fix":"147","desc":"125"},"removeEscape",{"range":"148","text":"149"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"150","text":"151"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"152","text":"149"},{"range":"153","text":"151"},{"range":"154","text":"149"},{"range":"155","text":"151"},{"range":"156","text":"149"},{"range":"157","text":"151"},{"range":"158","text":"149"},{"range":"159","text":"151"},{"range":"160","text":"149"},{"range":"161","text":"151"},{"range":"162","text":"149"},{"range":"163","text":"151"},{"range":"164","text":"149"},{"range":"165","text":"151"},{"range":"166","text":"149"},{"range":"167","text":"151"},{"range":"168","text":"149"},{"range":"169","text":"151"},{"range":"170","text":"149"},{"range":"171","text":"151"},{"range":"172","text":"149"},{"range":"173","text":"151"},[152,153],"",[152,152],"\\",[156,157],[156,156],[164,165],[164,164],[177,178],[177,177],[181,182],[181,181],[189,190],[189,189],[198,199],[198,198],[202,203],[202,202],[218,219],[218,218],[226,227],[226,226],[243,244],[243,243],[251,252],[251,251]]